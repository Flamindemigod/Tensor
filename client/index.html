<html>
  <head>
    <title>Tensor Client Testing</title>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <script src="https://cdn.tailwindcss.com"></script>
    <script defer>
      const ws = new WebSocket("ws://136.243.175.33:6969", [
        "Authorization",
        "bob",
      ]);
      //message handler

      window.onload = () => {
        const chatLog = document.getElementById("ChatLog");
        ws.onmessage = (e) => {
          const fragment = document.createDocumentFragment();
          const inner = fragment.appendChild(document.createElement("div"));
          inner.innerHTML = e.data;
          chatLog.appendChild(inner);
        };

        //sending message
        const sendButton = document.getElementById("send");
        const input = document.getElementById("text_input");
        sendButton.onclick = () => {
          ws.send(input.value);
          const fragment = document.createDocumentFragment();
          const inner = fragment.appendChild(document.createElement("div"));
          inner.innerHTML = "Self: " + input.value;
          chatLog.appendChild(inner);
          input.value = "";
        };
      };
    </script>
  </head>
  <body class="grid h-full" style="grid-template-rows: 1fr 128px">
    <div
      id="ChatLog"
      class="w-full h-full overflow-scroll p-2 flex flex-col gap-2"
    ></div>
    <div class="flex flex-col gap-2 p-2 h-min self-end">
      <input
        class="w-full h-16 rounded-md border-blue-200 border"
        type="text"
        name="text_field"
        id="text_input"
        value=""
      />
      <button class="p-2 rounded-md bg-purple-300" id="send">
        Send Message
      </button>
    </div>
  </body>
</html>
